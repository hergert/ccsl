#!/usr/bin/env -S uv run --script
# /// script
# requires-python = ">=3.11"
# dependencies = []
# ///
"""
Example external cost plugin for ccsl.

Note: ccsl now has a built-in 'cost' segment that reads from Claude's JSON.
This plugin is kept as an example of the exec plugin protocol.
"""
import json
import sys

def main():
    try:
        data = json.load(sys.stdin)

        # Extract cost information from Claude context
        cost_info = data.get("cost", {})
        total_cost = cost_info.get("total_cost_usd", 0.0)

        if total_cost == 0:
            return  # No cost info available

        # Return structured response
        response = {
            "text": f"${total_cost:.2f}",
            "style": "dim",
            "priority": 40
        }

        print(json.dumps(response))

    except Exception:
        # Silent failure - just exit
        pass

if __name__ == "__main__":
    main()
